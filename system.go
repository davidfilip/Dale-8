package main

const (
	cpuFrequency = 60
	numRegisters = 16
	ramCapacity  = 4096
	screenWidth  = 64
	screenHeight = 32
	pixelSize    = 10

	interpreterAreaStart = 0x000
	fontsetAreaStart     = 0x050
	programAreaStart     = 0x200
)

var (
	memory [ramCapacity]byte
	gfx    [screenWidth * screenHeight]byte
	stack  [16]byte
	V      [numRegisters]byte
	I      uint16
	PC     uint16
	SP     byte
	key    [16]bool

	DelayTimer byte
	SoundTimer byte
)

var fontset = []byte{
	// Standard sprites for showing (some) text.
	0xf0, 0x90, 0x90, 0x90, 0xf0, // 0
	0x20, 0x60, 0x20, 0x20, 0x70, // 1
	0xf0, 0x10, 0xf0, 0x80, 0xf0, // 2
	0xf0, 0x10, 0xf0, 0x10, 0xf0, // 3
	0x90, 0x90, 0xf0, 0x10, 0x10, // 4
	0xf0, 0x80, 0xf0, 0x10, 0xf0, // 5
	0xf0, 0x80, 0xf0, 0x90, 0xf0, // 6
	0xf0, 0x10, 0x20, 0x40, 0x40, // 7
	0xf0, 0x90, 0xf0, 0x90, 0xf0, // 8
	0xf0, 0x90, 0xf0, 0x10, 0xf0, // 9
	0xf0, 0x90, 0xf0, 0x90, 0x90, // A
	0xe0, 0x90, 0xe0, 0x90, 0xe0, // B
	0xf0, 0x80, 0x80, 0x80, 0xf0, // C
	0xe0, 0x90, 0x90, 0x90, 0xe0, // D
	0xf0, 0x80, 0xf0, 0x80, 0xf0, // E
	0xf0, 0x80, 0xf0, 0x80, 0x80, // F
}

var keyMap = map[int]byte{
  '1':           0x1,
  '2':           0x2,
  '3':           0x3,
  '4':           0xc,
  'Q':           0x4,
  'W':           0x5,
  'E':           0x6,
  'R':           0xd,
  'A':           0x7,
  'S':           0x8,
  'D':           0x9,
  'F':           0xe,
  'Z':           0xa,
  'X':           0x0,
  'C':           0xb,
  'V':           0xf,
  glfw.KeyUp:    0x2,
  glfw.KeyLeft:  0x4,
  glfw.KeyRight: 0x6,
}
